%% Custom commands
%% ===============


\usepackage{minted}
\usepackage{xspace}
\usepackage{cleveref}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{bm}
\usepackage{tikz}
\usepackage{rotating}
\usepackage{minitoc}
\usepackage{etoolbox}

% hopefully nice section coloring?
\usepackage{titlesec}

% make minitoc tocdpeth match tocdepth
% \setcounter{minitocdepth}{\value{tocdepth}}
% \setcounter{minitocdepth}{subsubsection}
\setcounter{minitocdepth}{3}

\titleformat{name=\section}[block]
  {\sffamily\Large\bfseries}
  {}
  {0pt}
  {\colorsectionblue}
\titlespacing*{\section}{0pt}{\baselineskip}{\baselineskip}

\titleformat{name=\subsection}[block]
  {\sffamily\bfseries}
  {}
  {0pt}
  {\colorsubsectiongreen}
\titlespacing*{\subsection}{0pt}{\parskip}{0pt}

\titleformat{name=\subsubsection}[block]
  {\sffamily\bfseries}
  {}
  {0pt}
  {\colorsubsubsectionred}
\titlespacing*{\section}{0pt}{\baselineskip}{\baselineskip}

\newcommand{\colorsectionblue}[1]{%
  \colorbox{blue!20}{\parbox{\dimexpr\textwidth-2\fboxsep}{\color{black}\thesection\ #1}}}

\newcommand{\colorsubsectiongreen}[1]{%
  \colorbox{green!20}{\parbox{\dimexpr\textwidth-2\fboxsep}{\color{black}\thesubsection\ #1}}}


\newcommand{\colorsubsubsectionred}[1]{%
\colorbox{red!20}{\parbox{\dimexpr\textwidth-2\fboxsep}{\color{black}\thesubsubsection\ #1}}}


\newcommand{\q}[1]{``#1''}


% GIRGs
\newcommand{\GIRG}{\mathrm{GIRG}}
\DeclareMathOperator{\shrinktogcc}{\textcolor{blue}{shrinkToGCC}}
\DeclareMathOperator{\uniformify}{\textcolor{blue}{uniformify}}
\newcommand{\PLP}{\mintinline{python}|powerlaw|\xspace}
\newcommand{\ffit}{f_{\mathrm{fit}}}  % statistic with which to fit GGM parameter
% statistic(s) with which to classify real/fake graphs
\newcommand{\fclass}{f^{\mathrm{class}}}  


%% Special characters for number sets, e.g. real or complex numbers.
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\X}{\mathbb{X}}
\newcommand{\T}{\mathbb{T}}

% Brackets
\newcommand{\abs}[1]{\left\lvert #1\right\rvert}
\newcommand{\bket}[1]{\left\lvert #1\right\rangle}
\newcommand{\brak}[1]{\left\langle #1 \right\rvert}
\newcommand{\braket}[2]{\left\langle #1\middle\vert #2 \right\rangle}
\newcommand{\bra}{\langle}
\newcommand{\ket}{\rangle}
\newcommand{\norm}[1]{\left\lVert #1\right\rVert}
\newcommand{\normalorder}[1]{\mathop{:}\nolimits\!#1\!\mathop{:}\nolimits}
\newcommand{\tv}[1]{|#1|}
% \renewcommand{\vec}[1]{\boldsymbol{\mathbf{#1}}}
\renewcommand{\vec}[1]{\bm{#1}}
% Probability
\DeclareMathOperator{\Bernoulli}{Bernoulli}
\DeclareMathOperator{\betaD}{beta}
\DeclareMathOperator{\bias}{bias}
\DeclareMathOperator{\binomial}{binomial}
\DeclareMathOperator{\corr}{corr}
\DeclareMathOperator{\cov}{cov}
\DeclareMathOperator{\gammaD}{gamma}
\DeclareMathOperator{\mse}{mse}
\DeclareMathOperator{\multinomial}{multinomial}
\DeclareMathOperator{\Poisson}{Poisson}
\DeclareMathOperator{\var}{var}
\DeclareMathOperator{\powerlaw}{powerlaw}
\newcommand{\E}{\mathbb{E}}
\newcommand{\PP}{\mathbb{P}}

% Caligraphic
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathscr{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathscr{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathscr{G}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cM}{\mathcal{M}}

% Other
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\newcommand{\eqname}[1]{\tag*{#1}}% Tag equation with name



%% Fixed/scaling delimiter examples (see mathtools documentation)
% \DeclarePairedDelimiter\abs{\lvert}{\rvert}
% \DeclarePairedDelimiter\norm{\lVert}{\rVert}

%% Use the alternative epsilon per default and define the old one as \oldepsilon
\let\oldepsilon\epsilon
\renewcommand{\epsilon}{\ensuremath\varepsilon}

%% Also set the alternate phi as default.
% \let\oldphi\phi
% \renewcommand{\phi}{\ensuremath{\varphi}}



%% benji: try to color all math mode text
% \renewcommand{\displaymath}{\color{red}\[}
% \renewcommand{\enddisplaymath}{\]\@ignoretrue\color{black}}

\definecolor{byzantium}{rgb}{0.44, 0.16, 0.39}
\definecolor{darkred}{rgb}{0.55, 0.2, 0.0}
\definecolor{electricyellow}{rgb}{1.0, 1.0, 0.0}
\definecolor{amber}{rgb}{1.0, 0.75, 0.0}
\definecolor{awesome}{rgb}{1.0, 0.13, 0.32}
\definecolor{applegreen}{rgb}{0.5, 0.65, 0.0}

\everymath{\color{darkred}}

\AtBeginEnvironment{equation*}{\color{darkred}}
\AtBeginEnvironment{align*}{\color{darkred}}
\AtBeginEnvironment{equation}{\color{darkred}}
\AtBeginEnvironment{align}{\color{darkred}}

% \everydisplay\expandafter{\the\everydisplay \color{blue}}
% my tables are now math colored??
% unfortunately this fix then stops my align environments from working
% \makeatletter
% \def\m@th{\mathsurround\z@\color{black}}
% \makeatother

% Restore black color for tables
% \AtBeginEnvironment{tabular}{\color{black}}
% \AtBeginEnvironment{table}{\color{black}}

% % Reset color after tables
% \AtEndEnvironment{tabular}{\color{black}}
% \AtEndEnvironment{table}{\color{black}}

% my footnotes are now math colored too?
% \makeatletter
% \renewcommand\@makefnmark{\hbox{\@textsuperscript{\normalfont\color{red}\@thefnmark}}}
% \makeatother
\renewcommand\thefootnote{\textcolor{green}{\arabic{footnote}}}


% make italics a different color
\let\oldtextit\textit 
\renewcommand\textit[1]{\oldtextit{\color{applegreen}#1}}

% color links?
\hypersetup{colorlinks,linkcolor=awesome}